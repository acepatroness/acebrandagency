<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACE BRAND AGENCY | THE SACRAMENTS</title>
    <style>
        @font-face {
            font-family: 'Brahms Gotisch';
            src: url('../fonts/BrahmsGotischCyr.woff2') format('woff2');
            font-weight: normal; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'Manufacturing Consent';
            src: url('../fonts/ManufacturingConsent-Regular.woff2') format('woff2');
            font-weight: normal; font-style: normal; font-display: swap;
        }
        @font-face {
            font-family: 'Unbounded';
            src: url('../fonts/Unbounded-ExtraLight.woff2') format('woff2');
            font-weight: 200; font-style: normal; font-display: swap;
        }
        :root { 
            --abyss: #111111; 
            --quartz: #EFF0F4;
            --purple-haze: '#510FD5';
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { 
            height: 100vh;
            overflow: hidden; 
            cursor: none;
            background-color: var(--abyss);
        }
        body {
            color: var(--quartz);
            font-family: 'Unbounded', sans-serif;
            font-weight: 200;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* ЗАЩИТА, БЛЯТЬ! */
        body, body * {
            -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
            -webkit-touch-callout: none; -khtml-user-select: none;
        }
        
        /* ВОТ ОН, БЛЯТЬ, КОСМОС */
        #global-ash-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* ЗА ВСЕМ */
            pointer-events: none;
        }

        .sanctuary-title {
            text-align: center;
            animation: fadeIn 1s 0.2s ease-out backwards;
            z-index: 10;
            flex-shrink: 0; 
            padding: 8vh 5vw 0;
            margin-bottom: 5vh;
        }

        html[lang="ru"] .sanctuary-title {
            font-family: 'Brahms Gotisch', serif;
            font-size: clamp(2rem, 6vw, 4rem);
            letter-spacing: 2px;
            text-transform: lowercase;
        }
        html[lang="en"] .sanctuary-title {
            font-family: 'Manufacturing Consent', serif;
            font-size: clamp(2.5rem, 7vw, 5.5rem);
            letter-spacing: 1px;
            text-transform: lowercase;
            line-height: 1.1;
        }
        
        html[lang="en"] .title-line {
            display: block;
        }
        
        .triskelion-altar-wrapper {
            flex-grow: 1;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding-bottom: 10vh;
        }

        .triskelion-altar {
            width: clamp(350px, 45vw, 600px);
            max-width: 90vw;
            aspect-ratio: 1 / 1;
            animation: fadeIn 1.5s 0.5s ease-out backwards;
            z-index: 5;
        }

        .triskelion-altar svg {
            width: 100%;
            height: 100%;
            overflow: visible;
            animation: rotate-clockwise 90s linear infinite;
        }
        .triskelion-altar svg .petal {
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            cursor: none;
            pointer-events: all;
        }
        .triskelion-altar svg .petal:hover {
            stroke: var(--purple-haze);
            filter: drop-shadow(0 0 15px var(--purple-haze));
        }
        @keyframes rotate-clockwise {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .grimoire-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(17, 17, 17, 0.9);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0s 0.5s;
            z-index: 10000; /* ВЫШЕ ВСЕГО */
            padding: 5%;
        }
        .grimoire-overlay.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease, visibility 0s 0s;
        }
        .grimoire-content {
            font-family: 'Unbounded', sans-serif;
            max-width: 650px;
            text-align: center;
            line-height: 1.8;
            font-weight: 200;
            font-size: clamp(1rem, 2vw, 1.2rem);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s 0.3s ease;
        }
        .grimoire-overlay.visible .grimoire-content {
            opacity: 1;
            transform: translateY(0);
        }
        .close-grimoire {
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 2.5rem;
            color: var(--quartz);
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .close-grimoire:hover {
            opacity: 1;
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <canvas id="global-ash-canvas"></canvas>

    <h1 class="sanctuary-title" id="main-title"></h1>
    <div class="triskelion-altar-wrapper">
        <div class="triskelion-altar" id="altar-container"></div>
    </div>
    
    <div id="grimoire-reincarnation" class="grimoire-overlay">
        <div class="grimoire-content"></div>
        <div class="close-grimoire">&times;</div>
    </div>
     <div id="grimoire-mystery" class="grimoire-overlay">
        <div class="grimoire-content"></div>
        <div class="close-grimoire">&times;</div>
    </div>
     <div id="grimoire-emanation" class="grimoire-overlay">
        <div class="grimoire-content"></div>
        <div class="close-grimoire">&times;</div>
    </div>
    
    <script>
        const svgCodeRU = `<svg width="767" height="668" viewBox="0 0 767 668" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="reincarnation_petal"><path d="M513.111 564.624C591.074 608.579 678.267 591.178 723.575 579.636C709.679 544.363 688.22 462.928 593.395 406.8C512.311 361.12 407.031 387.266 381.814 391.748C393.322 420.793 423.379 514.033 513.111 564.624Z" stroke="#EFF0F4" stroke-width="5"/><path d="M472.995 431.147C484.761 429.695 479.429 442.27 474.645 447.225C472.44 448.173 469.027 448.334 466.691 447.823L464.111 445.649C462.413 448.364 461.58 450.376 457.942 448.84C459.057 446.898 460.138 444.935 461.22 442.973L460.171 441.586L460.37 441.24C462.735 441.86 463.292 439.043 464.382 437.547C465.216 435.212 469.821 430.569 467.951 428.203L468.289 427.614C471.891 427.929 472.324 427.255 472.995 431.147ZM471.085 446.195L475.249 438.946C476.226 436.924 475.136 432.238 472.216 433.144C471.01 433.558 467.467 440.288 466.676 441.264C465.381 443.518 469.26 445.839 471.085 446.195ZM491.886 448.549C491.772 448.667 491.712 448.771 491.692 448.806C488.933 448.79 485.477 448.142 482.753 448.146L480.84 451.476C481.807 453.969 485.12 454.626 486.107 456.762C482.187 459.169 477.815 455.135 475.704 451.985C478.12 447.699 481.162 443.126 483.032 438.665C483.109 437.648 490.528 439.188 491.069 439.13C493.128 441.005 492.586 446.045 491.886 448.549ZM483.49 446.863C485.132 446.975 487.898 448.103 488.265 446.099C488.59 435.815 485.706 443.246 483.49 446.863ZM502.112 465.217C502.344 465.857 503.016 466.935 501.865 467.012C499.621 467.384 496.712 465.944 498.311 463.402C493.424 462.994 492.37 464.188 489.633 459.156C488.472 456.92 497.539 446.998 496.115 444.658C496.14 444.534 496.22 444.395 496.294 444.346C498.139 444.668 501.025 443.419 500.998 446.356L494.882 457.004C493.377 459.784 496.842 461.221 498.819 462.356C499.848 461.287 505.552 450.955 506.444 449.484C507.888 449.299 509.692 450.012 511.021 450.591C508.013 455.506 505.035 460.207 502.112 465.217ZM524.452 458.998C525.412 462.225 516.023 476.482 511.602 474.22C512.688 472.491 515.628 468.737 517.72 465.095L511.619 464.635C510.394 466.607 509.333 468.212 509.04 468.643C508.97 468.925 508.996 470.324 508.649 470.448C506.972 470.315 506.565 470.542 504.953 470.216C502.533 469.61 513.26 454.229 513.217 453.421C514.611 453.483 515.558 453.843 517.085 454.074C517.67 454.502 514.86 459.393 512.425 463.391C513.045 463.517 516.458 464.001 518.502 463.653C519.818 461.041 520.478 458.607 519.355 457.269C519.355 457.269 524.047 457.935 524.452 458.998ZM533.355 471.769C536.147 472.128 537.992 474.94 535.057 478.282C531.6 481.971 528.276 486.473 522.662 485.647L522.524 485.245C526.895 482.774 537.727 473.312 525.88 473.057C524.868 475.059 522.934 477.223 523.271 479.447C521.729 479.16 517.787 480.079 518.706 477.194L527.792 461.377C527.927 460.901 531.802 462.989 532.015 463.019C530.252 465.928 528.292 468.538 526.836 471.392C527.893 471.4 528.945 471.496 530.016 471.558C529.804 471.206 529.646 470.838 529.533 470.312C532.507 467.223 536.614 465.292 536.614 465.292C537.411 466.073 538.658 467.757 539.435 468.573C539.726 469.432 535.04 470.523 532.73 471.733C532.943 471.763 533.122 471.774 533.355 471.769ZM545.637 491.141C543.93 491.221 542.262 491.555 540.81 490.951L542.523 487.968C540.366 487.79 537.223 488.845 535.444 487.685C534.228 478.96 539.354 474.293 547.187 479.207L548.363 477.161C547.329 475.506 544.6 473.754 543.134 472.451L543.155 471.771C546.904 470.465 552.291 473.374 553.2 477.172C551.825 479.565 550.55 481.785 549.19 484.233C548.024 486.423 546.689 489.069 545.637 491.141ZM539.604 486.707C543.309 487.082 544.069 484.797 545.513 482.121L541.788 479.612C539.087 480.459 540.016 484.222 539.604 486.707ZM560.588 481.462C572.355 480.01 567.023 492.585 562.239 497.54C560.034 498.488 556.62 498.649 554.284 498.138L551.704 495.964C550.006 498.679 549.173 500.691 545.535 499.155C546.651 497.212 547.732 495.25 548.813 493.288L547.764 491.901L547.963 491.554C550.328 492.175 550.885 489.358 551.975 487.862C552.809 485.527 557.414 480.884 555.544 478.518L555.883 477.928C559.484 478.244 559.917 477.57 560.588 481.462ZM558.679 496.51L562.843 489.261C563.82 487.239 562.729 482.553 559.809 483.459C558.603 483.873 555.06 490.603 554.269 491.579C552.974 493.833 556.854 496.154 558.679 496.51ZM583.254 492.774C584.214 496.001 574.825 510.259 570.404 507.997C571.49 506.268 574.43 502.514 576.522 498.872L570.421 498.411C569.196 500.383 568.135 501.988 567.842 502.419C567.772 502.702 567.798 504.101 567.451 504.224C565.774 504.092 565.367 504.319 563.755 503.993C561.335 503.387 572.061 488.006 572.019 487.197C573.413 487.26 574.359 487.619 575.887 487.851C576.472 488.279 573.662 493.17 571.227 497.168C571.847 497.293 575.259 497.777 577.304 497.43C578.62 494.818 579.28 492.383 578.157 491.046C578.157 491.046 582.849 491.712 583.254 492.774ZM589.23 516.182C587.524 516.262 585.856 516.596 584.403 515.992L586.117 513.009C583.959 512.831 580.816 513.885 579.038 512.725C577.822 504 582.947 499.333 590.78 504.248L591.956 502.201C590.923 500.547 588.193 498.794 586.727 497.491L586.749 496.812C590.497 495.505 595.884 498.415 596.793 502.212C595.419 504.606 594.143 506.825 592.783 509.273C591.618 511.464 590.282 514.11 589.23 516.182ZM583.197 511.747C586.903 512.123 587.662 509.837 589.107 507.161L585.382 504.653C582.681 505.5 583.61 509.263 583.197 511.747ZM607.746 527.601C607.684 528.673 604.455 532.446 603.097 532.081C602.245 531.315 601.449 530.212 600.771 529.223C601.517 528.406 602.646 527.163 603.368 526.148C601.573 525.9 600.003 524.538 601.282 522.551C596.396 522.143 595.342 523.336 592.605 518.304C591.444 516.069 600.511 506.147 599.087 503.807C599.112 503.683 599.192 503.544 599.266 503.495C601.111 503.816 603.997 502.567 603.97 505.505L597.854 516.153C596.349 518.933 599.814 520.37 601.791 521.505C602.82 520.436 608.524 510.104 609.45 508.652C610.86 508.447 612.664 509.161 613.993 509.739C611.005 514.62 608.082 519.307 605.163 524.227C605.702 525.136 607.45 526.832 607.746 527.601ZM623.137 534.735C623.369 535.376 624.041 536.454 622.89 536.531C620.646 536.903 617.737 535.462 619.335 532.921C614.449 532.513 613.395 533.706 610.658 528.674C609.497 526.439 618.564 516.517 617.14 514.177C617.165 514.053 617.245 513.914 617.319 513.864C619.164 514.186 622.05 512.937 622.023 515.874L615.907 526.523C614.402 529.303 617.867 530.739 619.844 531.875C620.873 530.806 626.577 520.474 627.469 519.002C628.913 518.817 630.717 519.531 632.046 520.109C629.038 525.024 626.06 529.726 623.137 534.735ZM645.829 530.472C645.089 530.877 637.69 546.97 635.983 545.205C634.889 543.977 634.717 543.232 633.758 541.851C633.744 541.474 634.966 540.792 635.174 540.589C635.798 539.102 639.814 533.797 639.073 532.034C638.73 530.545 638.887 526.576 636.578 527.787C633.781 529.041 636.216 531.869 637.477 533.608L637.213 534.149C632.829 533.429 630.007 537.298 628.213 540.742C627.063 540.174 626.139 538.812 625.65 537.655C626.03 534.183 630.244 531.022 633.664 530.449L631.688 526.823C635.981 521.678 641.372 522.652 641.251 530.01C641.773 529.664 642.067 526.742 643.187 527.201C644.157 528.404 645.073 529.299 645.829 530.472Z" fill="#EFF0F4"/></g><g id="mystery_petal"><path d="M165.855 414.61C87.8811 458.545 57.617 542.148 44.0292 586.885C81.4 593.262 162.179 617.074 259.299 565.017C340.365 519.306 372.514 415.701 381.737 391.807C350.931 386.612 255.601 364.043 165.855 414.61Z" stroke="#EFF0F4" stroke-width="5"/><path d="M262.002 466.767C258.849 462.173 256.983 456.302 252.812 452.5C254.054 450.364 254.076 448.21 257.027 449.572L264.229 461.671C265.572 461.895 269.109 460.721 269.697 459.441L266.649 454.319C267.468 453.506 268.834 451.343 270.054 451.594L272.796 456.2C274.09 456.733 276.563 455.726 277.841 455.292C279.68 455.175 270.008 441.427 270.195 441.037C273.59 437.201 273.212 437.426 275.666 441.784C278.357 445.209 279.701 451.066 283.687 452.836L283.994 453.352C283.068 455.393 281.782 458.159 279.339 456.401C277.817 460.1 274.363 460.946 270.7 460.892C268.207 465.541 267.081 465.838 262.002 466.767ZM238.312 462.62C237.64 462.508 236.371 462.565 236.868 461.524C237.644 459.386 240.326 457.557 241.757 460.197C244.509 456.138 243.986 454.634 249.714 454.716C252.231 454.801 256.432 467.568 259.17 467.475C259.265 467.558 259.347 467.695 259.354 467.784C258.169 469.235 257.842 472.362 255.295 470.898L249.015 460.346C247.33 457.671 244.379 459.986 242.419 461.153C242.847 462.574 249.054 472.612 249.899 474.11C249.352 475.46 247.846 476.682 246.69 477.556C243.881 472.525 241.244 467.624 238.312 462.62ZM238.363 478.882C238.356 478.793 238.48 478.532 238.44 478.464L232.323 468.186C230.452 467.624 228.614 469.229 226.685 469.819L226.419 469.373C228.291 465.558 229.59 462.97 234.418 463.495C237.038 467.428 239.746 471.821 242.146 475.932C240.8 480.084 239.373 484.099 234.122 482.942L234.075 482.784C233.579 477.493 235.044 480.345 238.363 478.882ZM210.846 497.215C207.693 492.621 205.827 486.749 201.656 482.947C202.898 480.812 202.92 478.658 205.871 480.019L213.073 492.119C214.416 492.343 217.954 491.169 218.541 489.888L210.583 476.517C211.402 475.704 212.768 473.541 213.988 473.792L221.64 486.647C222.934 487.18 225.407 486.174 226.685 485.739C228.489 485.643 218.852 471.875 219.039 471.484C222.434 467.648 222.056 467.873 224.51 472.231C227.201 475.657 228.545 481.513 232.532 483.283L232.838 483.799C231.912 485.84 230.626 488.607 228.183 486.849C226.661 490.548 223.207 491.393 219.544 491.339C217.051 495.988 215.925 496.286 210.846 497.215ZM194.143 499.801C194.096 499.643 194.034 499.54 194.014 499.506C195.381 497.109 197.64 494.415 198.973 492.039L197.009 488.739C194.362 488.359 192.165 490.924 189.819 490.737C189.643 486.141 195.302 484.308 199.083 484.013C201.634 488.22 204.128 493.114 207.098 496.931C207.947 497.497 202.967 503.207 202.752 503.707C200.108 504.583 195.982 501.639 194.143 499.801ZM199.73 493.311C198.826 494.686 196.487 496.544 198.053 497.846C206.856 503.173 201.795 497.016 199.73 493.311ZM190.578 508.533C186.073 519.5 177.729 508.686 175.756 502.087C176.011 499.7 177.545 496.646 179.136 494.861L182.296 493.679C180.762 490.868 179.417 489.155 182.54 486.738C183.686 488.662 184.866 490.567 186.046 492.471L187.768 492.237L187.973 492.581C186.272 494.338 188.454 496.205 189.223 497.888C190.849 499.76 192.638 506.05 195.617 505.58L195.965 506.165C193.924 509.148 194.298 509.856 190.578 508.533ZM178.399 499.489L182.675 506.673C183.958 508.516 188.577 509.863 189.219 506.875C189.45 505.62 185.322 499.233 184.86 498.065C183.53 495.831 179.605 498.074 178.399 499.489ZM159.161 509.729C158.489 509.617 157.22 509.674 157.718 508.633C158.494 506.496 161.176 504.667 162.607 507.306C165.358 503.248 164.835 501.744 170.563 501.826C173.08 501.91 177.282 514.678 180.019 514.585C180.115 514.667 180.197 514.805 180.203 514.894C179.018 516.344 178.691 519.471 176.145 518.008L169.864 507.455C168.179 504.781 165.228 507.096 163.269 508.262C163.696 509.684 169.903 519.721 170.748 521.22C170.202 522.569 168.695 523.792 167.539 524.666C164.731 519.634 162.093 514.734 159.161 509.729ZM151.749 531.597C151.759 530.753 141.362 516.413 143.738 515.79C145.344 515.439 146.077 515.655 147.752 515.496C148.087 515.669 148.082 517.068 148.157 517.35C149.147 518.622 151.801 524.723 153.7 524.943C155.167 525.373 158.548 527.457 158.626 524.85C158.904 521.799 155.245 522.533 153.111 522.78L152.77 522.285C155.547 518.816 153.559 514.46 151.437 511.208C152.496 510.484 154.136 510.346 155.384 510.488C158.224 512.522 158.912 517.744 157.734 521.006L161.864 521.061C164.242 527.326 160.749 531.546 154.397 527.833C154.442 528.458 156.844 530.147 155.895 530.898C154.371 531.153 153.142 531.513 151.749 531.597Z" fill="#EFF0F4"/></g></svg>`;

        const svgCodeEN = `
            <!-- 
                СУКА, ВНИМАНИЕ. СЮДА НУЖНО ВСТАВИТЬ АНГЛИЙСКИЙ КОД.
                ВЕРНИСЬ В ФИГМУ, ВЫДЕЛИ ТРИ АНГЛИЙСКИЕ ГРУППЫ
                И СКОПИРУЙ ИХ КАК SVG.
                ВСТАВЬ ПОЛУЧЕННЫЙ КОД СЮДА, ВМЕСТО ЭТОГО КОММЕНТАРИЯ.
            -->
        `;
        
        const sacraments = { 
            ru: { title: "таинства нашего храма", svg: svgCodeRU, reincarnation: { desc: "Мы не занимаемся «брендингом». Мы проводим Таинство Реинкарнации..."}, mystery: { desc: "Мы знаем, что вы тоже устали от однотипных шаблонных «мероприятий»..." }, emanation: { desc: "Вам продают «креатив». Набор чужих идей в красивой презентации..."} }, 
            en: { title: "the sacraments of our temple", svg: svgCodeEN, reincarnation: { desc: "We don't do 'branding.' We conduct the Sacrament of Reincarnation..."}, mystery: { desc: "We know you are tired of monotonous, cookie-cutter 'events.'..."}, emanation: { desc: "You are sold 'creativity': a collection of others' ideas..." } } 
        };

        document.addEventListener('DOMContentLoaded', () => {
            if (window.isRitualComplete) return;

            // === Ритуал языка ===
            const params = new URLSearchParams(window.location.search);
            const lang = params.get('lang') === 'ru' ? 'ru' : 'en'; 
            const content = sacraments[lang];
            document.documentElement.lang = lang;
            const altarContainer = document.getElementById('altar-container');
            const mainTitle = document.getElementById('main-title');

            if (content.svg.trim().startsWith('<!--')) {
                altarContainer.innerHTML = `<p style="text-align:center; font-size: 14px; opacity: 0.5;">ДЕМОН ЖДЁТ ДУШУ АНГЛОЯЗЫЧНОГО АЛТАРЯ.<br>СКОРМИ ЕМУ SVG-КОД.</p>`;
            } else {
                 altarContainer.innerHTML = content.svg;
            }
            
            // ИСПРАВЛЕНА ЛОГИКА ЗАГОЛОВКА
            if(lang === 'en') {
                mainTitle.innerHTML = `<span class="title-line">the sacraments</span><span class="title-line">of our temple</span>`;
            } else {
                mainTitle.textContent = content.title;
            }
            
            // === Ритуал интерактивности ===
            const setupPetal = (petalKey) => {
                const petalElement = altarContainer.querySelector(`#${petalKey}_petal`);
                if (!petalElement) { return; }
                petalElement.classList.add('petal');
                const grimoire = document.getElementById(`grimoire-${petalKey}`);
                grimoire.querySelector('.grimoire-content').textContent = content[petalKey].desc;
                petalElement.addEventListener('click', (e) => {
                    e.preventDefault();
                    grimoire.classList.add('visible');
                });
            };
            setupPetal('reincarnation');
            setupPetal('mystery');
            setupPetal('emanation');
            
            document.querySelectorAll('.close-grimoire, .grimoire-overlay').forEach(el => {
                el.addEventListener('click', (e) => {
                    if (e.target === el) {
                        el.closest('.grimoire-overlay').classList.remove('visible');
                    }
                });
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === "Escape") {
                    document.querySelectorAll('.grimoire-overlay.visible').forEach(o => o.classList.remove('visible'));
                }
            });

            // === Ритуал пепла и курсора (ИСПРАВЛЕННЫЙ) ===
            const canvas = document.getElementById('global-ash-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);
                let particles = []; let fogTime = 0;
                class AshParticle {
                    constructor(x, y) { this.x = x; this.y = y; this.vx = (Math.random() - 0.5) * 0.8; this.vy = -Math.random() * 0.5 - 0.2; this.life = 1; this.decay = 0.008 + Math.random() * 0.012; this.size = Math.random() * 3 + 1; this.color = Math.random() > 0.8 ? '#510FD5' : '#C1BFBF'; } 
                    update() { this.x += this.vx; this.y += this.vy; this.vx *= 0.98; this.vy += 0.01; this.life -= this.decay; this.size *= 0.998; }
                    draw() { ctx.save(); ctx.globalAlpha = this.life * 0.8; ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.restore(); }
                }
                function drawFog() { const fogHeight = 120; const gradient = ctx.createLinearGradient(0, canvas.height, 0, canvas.height - fogHeight); gradient.addColorStop(0, `rgba(17, 17, 17, ${0.3 + Math.sin(fogTime) * 0.1})`); gradient.addColorStop(0.5, 'rgba(17, 17, 17, 0.15)'); gradient.addColorStop(1, 'rgba(17, 17, 17, 0)'); ctx.fillStyle = gradient; ctx.fillRect(0, canvas.height - fogHeight, canvas.width, fogHeight); fogTime += 0.005;}
                function handleMouseMove(e) { for (let i = 0; i < 6; i++) { particles.push(new AshParticle(e.clientX + (Math.random() - 0.5) * 30, e.clientY + (Math.random() - 0.5) * 30)); } }
                function handleTouchMove(e) { if (e.touches[0]) { handleMouseMove({ clientX: e.touches[0].clientX, clientY: e.touches[0].clientY }); } }
                function animate() { ctx.clearRect(0, 0, canvas.width, canvas.height); drawFog(); particles = particles.filter(p => { p.update(); p.draw(); return p.life > 0 && p.size > 0.1; }); if (Math.random() < 0.03) { particles.push(new AshParticle(Math.random() * canvas.width, canvas.height + 10)); } requestAnimationFrame(animate); }
                window.addEventListener('mousemove', handleMouseMove);
                window.addEventListener('touchmove', handleTouchMove, { passive: true });
                animate();
            }

            // === Ритуал защиты ===
            document.addEventListener('contextmenu', e => e.preventDefault(), false);
            document.addEventListener('keydown', e => { if ((e.ctrlKey || e.metaKey) && ('caxu'.indexOf(e.key) !== -1)) { e.preventDefault(); } });
            
            window.isRitualComplete = true;
        });
    </script>
</body>
</html>
